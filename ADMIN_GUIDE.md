# 📚 商家管理后台 - 完整使用手册

> **利兹华人网商家信息管理系统** - 简单易用的本地化管理工具

---

## 🎯 快速开始

### 第一步：启动本地服务器

**为什么需要启动服务器？**
浏览器的安全策略不允许直接从文件系统读取 JSON 文件，因此必须通过本地服务器访问。

**三种启动方式（任选其一）：**

#### 方式 1：Python 内置服务器（推荐）
```bash
# 在项目根目录打开终端/命令行
python3 -m http.server 5500

# Windows 用户可能需要使用
python -m http.server 5500
```

#### 方式 2：VS Code Live Server 插件
1. 安装 "Live Server" 扩展
2. 右键点击 `admin.html`
3. 选择 "Open with Live Server"
4. 浏览器自动打开管理后台

#### 方式 3：GitHub Codespaces
1. 在终端运行 `python3 -m http.server 5500`
2. 在 VS Code 底部 **Ports** 面板找到 5500 端口
3. 点击 "Open in Browser" 打开生成的公网链接
4. 在地址后添加 `/admin.html`

> ⚠️ **重要提示**：直接双击 `admin.html` 打开会导致数据无法加载！

### 第二步：打开管理后台
在浏览器中访问：
- `http://localhost:5500/admin.html` （本地）
- 或 Codespaces 生成的链接

看到紫色渐变背景界面即表示成功！

---

### 3. 三个主要功能

#### ➕ 添加商家
1. **填写基本信息**
   - 商家分类：选择美食餐饮、休闲娱乐或生活服务
   - 商家类型：例如"私厨"、"火锅店"、"理发店"
   - 商家名称：店铺的名字

2. **填写联系方式**
   - 地址：店铺地址
   - 微信号：商家微信
   - 电话号码：联系电话

3. **添加详细信息**
   - 商家描述：简单介绍
   - 提供服务：例如"堂食、外卖、预订"
   - 营业时间：例如"12pm-2:30am"
   - 标签：例如"家常菜、特色菜"

4. **上传图片**
   - 点击上传区域选择图片
   - 或直接拖拽图片到上传区域
   - 可以上传多张图片
   - 支持 JPG、PNG 格式

5. **保存**
   - 点击"保存商家信息"按钮
   - 保存后页面会提示“已保存，别忘了导出数据”

#### 📋 管理商家
- 查看所有已添加的商家
- 使用搜索框快速找到商家
- 点击"编辑"修改商家信息
- 点击"删除"移除商家（需确认）

#### 💾 导出数据
- 查看数据统计
- 点击"下载 shops.json"导出所有商家数据
- 将下载的文件替换到 `data/shops.json`

## 📝 重要说明

### 🧭 完整操作流程（推荐顺序）

#### ✅ 标准工作流程
```
录入信息 → 检查确认 → 导出数据 → 替换文件 → 保存图片 → 验证更新 → 部署线上
```

**详细步骤：**

1️⃣ **录入商家信息**
   - 启动服务器并打开 `admin.html`
   - 在"添加商家"标签填写信息
   - 上传商家图片（可多张）
   - 点击"保存商家信息"

2️⃣ **检查数据准确性**
   - 切换到"管理商家"标签
   - 在列表中找到刚添加的商家
   - 检查所有信息是否正确
   - 如有错误点击"编辑"修改

3️⃣ **导出数据文件**
   - 切换到"导出数据"标签
   - 查看统计信息确认数量
   - 点击"下载 shops.json"
   - 文件保存到浏览器下载目录

4️⃣ **替换数据文件**
   - 找到下载的 `shops.json`
   - 复制到项目 `data/` 目录
   - 选择"替换"覆盖原文件

5️⃣ **保存图片文件**（重要！）
   - 按商家编号创建目录：`assets/images/001/`、`002/`等
   - 将原始图片重命名：`001-1.jpg`、`001-2.jpg`等
   - 复制到对应目录

6️⃣ **验证更新**
   - 打开网站主页查看新商家
   - 进入详情页检查图片加载
   - 测试搜索功能

7️⃣ **部署到线上**（可选）
   - GitHub Pages：`git add .` → `git commit` → `git push`
   - 其他服务器：上传 `data/shops.json` 和图片目录

### 📸 图片管理详解

#### 命名规则
**格式**：`编号-序号.扩展名`
- **编号**：3位数字，与商家ID相同（纯数字，如 001、015、030）
- **序号**：从1开始，第几张图片
- **扩展名**：.jpg 或 .png

**示例**：
```
001-1.jpg    # 商家001的第1张图
001-2.jpg    # 商家001的第2张图
025-1.png    # 商家025的第1张图
```

#### 目录结构
```
assets/images/
├── 001/
│   ├── 001-1.jpg
│   └── 001-2.jpg
├── 002/
│   └── 002-1.jpg
└── 015/
    ├── 015-1.jpg
    ├── 015-2.jpg
    └── 015-3.jpg
```

#### 图片规格建议
- **尺寸**：宽度 800-1200px
- **格式**：JPG（照片）或 PNG（图标）
- **大小**：单张 < 500KB
- **数量**：每个商家 1-5 张

#### 批量处理工具
- **Windows**：画图、IrfanView
- **Mac**：预览批量导出
- **在线**：TinyPNG 压缩

### 💾 数据管理最佳实践

#### 备份策略
**重要操作前必须备份！**

```bash
# 方法1：简单复制
cp data/shops.json data/shops.json.backup

# 方法2：添加日期标记
cp data/shops.json data/shops.json.2025-11-27

# 方法3：备份整个数据目录
cp -r data data.backup
cp -r assets/images assets/images.backup
```

#### 使用 Git 版本控制
```bash
# 1. 查看修改内容
git status
git diff data/shops.json

# 2. 暂存修改
git add data/shops.json assets/images/

# 3. 提交修改
git commit -m "新增3家商家：一日三餐、利兹火锅、XX理发店"

# 4. 推送到远程
git push origin main

# 5. 回滚到之前版本（如果出错）
git checkout HEAD~1 data/shops.json
```

#### 数据恢复方案
**如果误删或数据损坏：**

| 情况 | 解决方案 |
|------|---------|
| 刚才误删 | 浏览器下载文件夹找历史导出 |
| 有备份文件 | 直接替换回备份的 .json |
| 使用了 Git | `git checkout data/shops.json` |
| 都没有 | 😱 从零开始...请务必做好备份！ |

#### 定期维护建议
- ⏰ **每月**：检查商家信息是否过时
- 📦 **每季度**：导出完整备份到云盘
- 🔍 **随时**：发现错误立即修正
- 📊 **年度**：清理关闭的商家

## 🎨 界面说明

### 表单字段
- 带 `*` 的是必填项
- 其他都是可选项
- 鼠标悬停在字段上可以看到提示

### 图片上传
- 支持点击上传
- 支持拖拽上传
- 可以上传多张图片
- 点击预览图片上的 `×` 删除

### 商家列表
- 显示所有商家的卡片
- 不同分类有不同颜色标签
- 搜索框可以按名称、类型、标签搜索
- 点击卡片上的“编辑”会自动跳回表单，并填好对应内容
- “删除”会弹出确认框，避免误操作

### 导出统计
- 显示当前商家总数以及按分类的数量
- 用于在导出前确认数据是否完整
- 每次导出前最好再读一遍统计，确认数量符合预期

## 💡 使用技巧

1. **批量添加**：可以连续添加多个商家，最后统一导出
2. **数据备份**：定期导出 shops.json 作为备份
3. **图片命名**：建议使用有意义的图片文件名便于管理
4. **信息完整**：尽量填写完整信息，用户体验更好
5. **刷新缓存**：修改后若浏览器仍显示旧数据，按 `Ctrl+Shift+R`（或 ⌘+Shift+R）强制刷新

## 🛠️ 进阶操作

### 批量导入旧数据
1. 手动编辑 `data/shops.json` 添加新商家
2. 在后台点击 “导出数据” → “下载”
3. 用下载的文件覆盖原文件，确保格式一致

### 更新已有商家
1. 在“管理商家”中搜索该商家
2. 点击“编辑”，修改完毕后点击“保存”
3. 如果替换了图片，记得重新导出并上传新图片

### 清理无用图片
1. 在“管理商家”删除不需要的商家
2. 到 `assets/images/<编号>/` 删除对应图片，避免无用占空间

### 部署到线上
1. 确认 `data/shops.json` 和图片均已更新
2. 如果用 GitHub Pages / Netlify，推送最新代码即可
3. 若用其他服务器，上传整个 `assets/images` 目录以及 `data/shops.json`

## ❓ 常见问题

**Q: 添加商家后网站上看不到？**
A: 需要导出 shops.json 并替换到 data/ 目录，然后刷新网站。

**Q: 图片显示不出来？**
A: 确认图片已保存到正确的目录，文件名与 shops.json 中记录的一致。

**Q: 可以修改已有商家吗？**
A: 可以，在"管理商家"标签点击"编辑"按钮。

**Q: 删除商家后能恢复吗？**
A: 不能自动恢复，建议删除前先导出数据备份。

**Q: 浏览器提示“拒绝连接 / Failed to fetch”？**
A: 需要通过 `python3 -m http.server` 或 Live Server 打开，直接双击 HTML 不会有权限读取 JSON。

**Q: Codespaces 打不开 `localhost`？**
A: 在 VS Code 底部 Ports 面板转发 5500 端口，点击生成的公网链接访问。

**Q: 页面内容没更新？**
A: 按 `Ctrl+Shift+R` 强制刷新，或清空浏览器缓存、重新导出数据。

## 🚀 下一步

1. 熟悉界面和操作
2. 试着添加一个测试商家
3. 导出数据检查格式
4. 正式添加真实商家信息
5. 建议每月复查一次商家信息，保持数据最新

---

##  ���������ٲ��

###  **Q1: ҳ����ʾ�հ׻�'Failed to fetch'��**
```
 ����ֱ��˫�� HTML �ļ�
 ������������ط�����
   python3 -m http.server 5500
   ���� http://localhost:5500/admin.html
```

###  **Q2: ���Ӻ�ǰ̨��������**
```
ԭ��ֻ��������ڴ���
�������������  �滻�ļ�  ˢ��ҳ��
```

###  **Q3: ͼƬ����ʾ��**
```
��飺
 Ŀ¼��ȷ��assets/images/001/
 ������ȷ��001-1.jpg
 JSON��¼��shops.json ���ж�Ӧ
```

###  **Q4: ��ɾ�ָܻ���**
```
������
- �б���  ֱ���滻
- �� Git  git checkout
- ����ʷ  ����������ļ���
```

---

##  ���ʵ��

###  ��������嵥
```
�������̼ң�
 ������������
 ��Ϣ��д����
 ͼƬ���ϴ�
 ����ɹ�
 ��������
 �滻�ļ�
 ͼƬ�鵵
 ��֤��ʾ
```

###  ���ɺ�ϰ��
-  ����ǰ�ȱ���
-  ������Ϣ�淶
-  ���ڼ��ά��
-  ʹ�� Git ����

---

##  ���ٲο�

### ��������
```bash
python3 -m http.server 5500
# ���� http://localhost:5500/admin.html
```

### ǿ��ˢ��
```
Windows: Ctrl + Shift + R
Mac: Command + Shift + R
```

### ��������
```bash
cp data/shops.json data/shops.backup.json
```

---

**��ס��Ҫ�㣺**
1. �÷��������ʣ�����˫����
2. �޸ĺ󵼳������ݲű��棩
3. ����ǰ���ݣ����ⶪʧ��

ףʹ����죡
