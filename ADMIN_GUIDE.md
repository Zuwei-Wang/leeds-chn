# 商家管理后台使用指南

## 🎯 快速开始

### 1. 启动本地服务器
- **本地电脑**：在项目根目录执行 `python3 -m http.server 5500`
- **VS Code / Codespaces**：在终端运行同样的命令，然后在 VS Code 底部的 **Ports** 面板里转发 5500 端口，点击 "Open in Browser" 打开自动生成的 `https://xxx-5500.app.github.dev/admin.html`
- **Live Server 插件**：直接右键 `admin.html` 选择 "Open with Live Server" 即可

> ⚠️ 直接双击 `admin.html` 打开，浏览器无法加载本地 JSON 文件，会出现“拒绝连接”或空白数据。

### 2. 打开管理后台
在浏览器地址栏输入 `http://localhost:5500/admin.html`（或转发后的 URL），可以看到带紫色渐变背景的界面。

### 3. 三个主要功能

#### ➕ 添加商家
1. **填写基本信息**
   - 商家分类：选择美食餐饮、休闲娱乐或生活服务
   - 商家类型：例如"私厨"、"火锅店"、"理发店"
   - 商家名称：店铺的名字

2. **填写联系方式**
   - 地址：店铺地址
   - 微信号：商家微信
   - 电话号码：联系电话

3. **添加详细信息**
   - 商家描述：简单介绍
   - 提供服务：例如"堂食、外卖、预订"
   - 营业时间：例如"12pm-2:30am"
   - 标签：例如"家常菜、特色菜"

4. **上传图片**
   - 点击上传区域选择图片
   - 或直接拖拽图片到上传区域
   - 可以上传多张图片
   - 支持 JPG、PNG 格式

5. **保存**
   - 点击"保存商家信息"按钮
   - 保存后页面会提示“已保存，别忘了导出数据”

#### 📋 管理商家
- 查看所有已添加的商家
- 使用搜索框快速找到商家
- 点击"编辑"修改商家信息
- 点击"删除"移除商家（需确认）

#### 💾 导出数据
- 查看数据统计
- 点击"下载 shops.json"导出所有商家数据
- 将下载的文件替换到 `data/shops.json`

## 📝 重要说明

### 🧭 完整操作流程（推荐顺序）
1. 启动服务器并打开 `admin.html`
2. 在 “添加商家” 里录入信息并上传图片
3. 切换到 “管理商家” 检查信息是否正确
4. 切换到 “导出数据” 点击 **下载 shops.json**
5. 将下载的文件替换项目里的 `data/shops.json`
6. 把刚才上传的原始图片按规则复制到 `assets/images/<编号>/`
7. 提交 / 部署站点（可选）

### 图片处理
1. 上传图片后，系统会显示预览
2. 导出数据时会生成图片文件名
3. **手动步骤**：需要将实际图片文件按照以下规则保存：
   - 第1个商家的图片放在 `assets/images/001/` 目录
   - 第2个商家的图片放在 `assets/images/002/` 目录
   - 以此类推...
   - 图片文件名格式：`001-1.jpg`, `001-2.jpg` 等

### 数据保存流程
1. 在管理后台添加/编辑商家
2. 切换到"导出数据"标签
3. 点击"下载 shops.json"
4. 将下载的文件替换到项目的 `data/shops.json`
5. 手动保存图片到对应目录
6. 刷新网站查看更新。如果部署到线上，再同步上传新的 `shops.json` 和图片。

### 版本备份建议
- 每次大批量修改前，先复制一份 `data/shops.json` 作为备份
- 删除商家前，也导出一次数据保存
- 使用 Git 的话，修改后运行 `git status` 确认仅更改了期望的文件，再 `git commit` 记录版本

## 🎨 界面说明

### 表单字段
- 带 `*` 的是必填项
- 其他都是可选项
- 鼠标悬停在字段上可以看到提示

### 图片上传
- 支持点击上传
- 支持拖拽上传
- 可以上传多张图片
- 点击预览图片上的 `×` 删除

### 商家列表
- 显示所有商家的卡片
- 不同分类有不同颜色标签
- 搜索框可以按名称、类型、标签搜索
- 点击卡片上的“编辑”会自动跳回表单，并填好对应内容
- “删除”会弹出确认框，避免误操作

### 导出统计
- 显示当前商家总数以及按分类的数量
- 用于在导出前确认数据是否完整
- 每次导出前最好再读一遍统计，确认数量符合预期

## 💡 使用技巧

1. **批量添加**：可以连续添加多个商家，最后统一导出
2. **数据备份**：定期导出 shops.json 作为备份
3. **图片命名**：建议使用有意义的图片文件名便于管理
4. **信息完整**：尽量填写完整信息，用户体验更好
5. **刷新缓存**：修改后若浏览器仍显示旧数据，按 `Ctrl+Shift+R`（或 ⌘+Shift+R）强制刷新

## 🛠️ 进阶操作

### 批量导入旧数据
1. 手动编辑 `data/shops.json` 添加新商家
2. 在后台点击 “导出数据” → “下载”
3. 用下载的文件覆盖原文件，确保格式一致

### 更新已有商家
1. 在“管理商家”中搜索该商家
2. 点击“编辑”，修改完毕后点击“保存”
3. 如果替换了图片，记得重新导出并上传新图片

### 清理无用图片
1. 在“管理商家”删除不需要的商家
2. 到 `assets/images/<编号>/` 删除对应图片，避免无用占空间

### 部署到线上
1. 确认 `data/shops.json` 和图片均已更新
2. 如果用 GitHub Pages / Netlify，推送最新代码即可
3. 若用其他服务器，上传整个 `assets/images` 目录以及 `data/shops.json`

## ❓ 常见问题

**Q: 添加商家后网站上看不到？**
A: 需要导出 shops.json 并替换到 data/ 目录，然后刷新网站。

**Q: 图片显示不出来？**
A: 确认图片已保存到正确的目录，文件名与 shops.json 中记录的一致。

**Q: 可以修改已有商家吗？**
A: 可以，在"管理商家"标签点击"编辑"按钮。

**Q: 删除商家后能恢复吗？**
A: 不能自动恢复，建议删除前先导出数据备份。

**Q: 浏览器提示“拒绝连接 / Failed to fetch”？**
A: 需要通过 `python3 -m http.server` 或 Live Server 打开，直接双击 HTML 不会有权限读取 JSON。

**Q: Codespaces 打不开 `localhost`？**
A: 在 VS Code 底部 Ports 面板转发 5500 端口，点击生成的公网链接访问。

**Q: 页面内容没更新？**
A: 按 `Ctrl+Shift+R` 强制刷新，或清空浏览器缓存、重新导出数据。

## 🚀 下一步

1. 熟悉界面和操作
2. 试着添加一个测试商家
3. 导出数据检查格式
4. 正式添加真实商家信息
5. 建议每月复查一次商家信息，保持数据最新
